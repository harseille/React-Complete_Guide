# Redux

- 리덕스는 무엇이며, 왜 쓰이는 가?
- 리덕스의 기초 사용법
- 리덕스 툴킷

## 리덕스는 무엇인가?

리덕스는 크로스 컴포넌트 또는 앱 와이드 상태를 위한 상태관리 시스템

### 상태의 3가지 종류

- Local state : 단일 컴포넌트에 영향을 미치는 상태,
- Cross Component State: 다수의 컴포넌트에 영향을 미치는 상태 (ex. 모달 오버레이 상태), props 체인을 구축해야해서 props 드릴링이 발생
- App Wide State : 모든 컴포넌트에 영향을 미치는 상태 (ex. 사용자 정보), context 사용

리액트 컨텍스트와 리덕스는 크로서 컴포넌트 상태나 앱 와이드 상태를 관리하도록 도와준다.

## 리액트 컨텍스트가 있는데 왜 리덕스가 필요한가?

리액트 컨택스트를 사용하면 context와 contextProvider 컴포넌트를 중심으로 상태를 관리할 수 있다.

그럼 왜 우린 리덕스가 필요할까요?

### 리액트 컨텍스트의 잠재적인 단점

- 설정이 복잡해질 수 있다.
- 상태 관리가 복잡해질 수 있다.

중컵된 contextProvider JSX코드 생산
-> 문제해결을 위해 하나의 큰 컨텍스트를 사용할 수 있으나, 다양한 많은 것을 관리하기 때문에 유지보수가 어려워짐

- 성능 문제
  빈번하게 변경이 일어나는 경우에는 적합하지 않다.
  부적적한 상태관리를 한다면 성능이 나빠질 수 있다.

- 유종적인 상태 확산을 대체할 수 없다(not ready to replace for Flux like state propagation)
  리덕스는 Flux liek 상태 관리 라이브러리

즉, 리액트 컨텍스트가 모든 시나리오와 모든 경우에서 리덕스를 훌륭하게 대체할 수는 없다

## 리덕스의 core concepts

리덕스의 작동방식

리덕스는 하나의 중앙 데이터(상태) 저장소 (One central Data(State) Store)

### 리덕스의 데이터 변경 방법

컴포넌트는 절대로 중요하지 않고, 절대로 직접 데이터를 조작하지 않는다.

구독을 해서 사용 -> 데이터는 제공자에서 구독자, 단방향으로 이동한다.

#### 리듀서 함수

리듀서 함수를 통해 저장소의 데이터를 변경한다.

useReducer hook과는 다르다.
reducer function은 일반적인 개념으로, 입력을 받아서 그 입력을 변환하고 줄이는 함수

#### 컴포넌넌트와 리듀서 함수 연결

데이터 변경을 트리거하는 건 결국 컴포넌트, 어떤 컴포넌트의 버튼을 클릭하면 그게 데이터 변경(action)을 트리거한다.
액션은 단순한 자바스크립트 객체

### 전체적인 구동 방식

```
Reducer Fn -(Mutates store data)-> Central Data(State) Store -(Subscription)-> Components -(Dispatch)-> Action -(Forwarded to)-> Reducer Fn -> ...
```

1. 컴포넌트에서 어떤 액션을 트리거 하면,
2. 액션을 리듀서로 전달하고 원하는 작업에 대한 설명을 읽는다.
3. 작업을 리듀서가 수행하고
4. 리듀서는 새로운 상태를 뱉어내고 상태를 대체한다.
5. 저장소의 상태가 변경되면 구독중인 컴포넌트가 알림을 받고
6. 컴포넌트들의 UI가 업데이트 된다.

## Redux reducer에 반환되는 객체

Redux가 기존의 state를 대체하는데 사용하는 완전히 새로운 객체인 새 snapshot을 항상 반환해야한다.
따라서 reducer에서 반환하는 객체는 중요하지 않다.
중요한 것은 기존 state와 병합되지 안고 기존의 state를 덮어쓴다는 것이다.
그러므로 state를 업데이트 할 때는 항상 다른 state를 설정해야한다.

절대 기존의 state를 변경해서는 안된다.
대신에 새로운 state 객체를 반환하여 항상 재정의 해야한다.

## Redux toolkit
