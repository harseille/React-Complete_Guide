# NextJS

React의 프레임워크

대규모 양산형 React앱을 더 편리하게 구축할 수 있도록 많은 기능을 제공한다.

React의 '풀스택' 프레임워크

React: 사용자 인터페이스 구출을 위한 JS 라이브러리
프론트엔드 프로젝트에 추가할 수 있는 외부 패키지
-> client side js code

React는 대화형 사용자 인터페이스를 구축할 수 있게 도와준다.
vanilla JS로 만드는 것보다 쉽게 구출할 수 있게 해주는 라이브러리다.

컴포넌트, state, props를 이용해서 UI부분에 초첨을 맞춘다.

대규모 프로젝트가 될수록 라우팅 라이브러리, 인증 라이브러리들을 추가해야 한다.

## 프레임워크

- 라이브러리 보다 더 크고 기능이 많다.
- 코드를 작성하는 방법이나 파일을 구성하는 방법에 관한 명확한 규칙과 지침이 있다.

## NextJS 목표와 이유

React개발자가 더 편하게 작업할 수 하는것이 목표

개발자 스스로 React앱에 추가했어야할 여러 핵심 기능들을 추가해서 React를 강화시킨다.

규모가 큰 React앱을 실제로 구출할 때 흔히 발생하는 문제들을 해결 하기위한 추가 라이브러리를 추가할 필요가 없이 해결 가능

## NextJS 기능과 이점

### 주요기능

#### 1. SSR(server side rendering)

> Automatic page pre-rendering: Great for SEO and inital load
> Blending CSR, SSR: Fetch data on the server adn render finished pages.

React앱은 진입점 HTML을 기준으로 동적으로 렌더링한다.
React는 클라이언트 사이드 자바스크립트 라이브러리이기 때문에 모든 렌더링이 클라이언트 쪽에서 일어난다.

사용자 브라우저에 보이는 것은 서버에서 나온것이 아니다.

결과적으로 사용자가 페이지를 방문할 때 서버에서 클라이언트로 전송되는 실제 HTML은 상당히 비어 있다.

페이지가 서버에서 데이터를 받아와야하는 초기렌더링 시에는 데이터를 받아오는 요청을 진행하는 동안 페이지가 깜빡인다.
데이터 가져오기는 클라이언트 쪽에서 자바스크립트 코드가 실행될 때만 시작하기 때문이다.

> SEO 최적화가 CSR은 문제가 된다.

로그인을 해야만 보이는 관리자 데시보드 같은 경우는 SEO가 중요하지 않지만

검색 엔진으로 찾아야 하는 콘텐츠가 많이 있는 공개 페이지인 경우에는 검색 엔진 최적화가 중요하다.

CSR의 경우 검색 엔진 크롤러는 서버에서 들어온 비어있는 초기 HTML 페이지만 보고 있다.
이렇게 검색 엔진 크롤러가 이 콘텐츠를 가져오지 못하면 문제가 될 수 있다.

이럴 때 서버 사이드 렌더링이 필요하다.

서버에서 해당 페이지를 사전 렌더링한 상태에서 서버에 요청이 들어 왔을 때 해당 데이터를 서버에서 가져오면 완성된 페이지가 사용자와 검색 엔진 크롤러에 제공된다.

그러면 사용자는 깜빡이는 로딩 상태를 보지 않아도 되고 검색엔진도 해당 페이지 콘텐츠를 보게 될 것이다.

이렇게 서버 사이드 렌더링으로 문제를 해결할 수 있다.

React에서도 서버 사이드 렌더링을 추가할 수 있는 기능이 내장되어 있지만 구형하기 까다롭다.

NextJS에는 SSR이 내장 되어 있다. 즉 자동으로 페이지를 사전 렌더링 한다.
NextJS를 이용하면 초기 요청으로 읽어 들인 후에도 여전히 브라우저에서 기본 React 앱과 기본 싱글 페이지 애플리케이션을 실행 할 수 있다.
사용자가 후속 탐색을 할 수도 있는데 사용자가 페이지를 열어서 탐색할 때 이런 활동들을 브라우저에서 React가 관리하여 사용자에게 대화형 인터페이스를 제공할 수 있다.

> NextJS는 클라이언트와 서버 사이드 코드를 혼합한다는 뜻이다.

#### 2. file based routing

> Define pages and routes with files amd folders instead of code
> Less code, less work, highly understandable

기본 React는 라우터가 있지 않다.
라우팅이란 사용자에게 여러 페이지가 있는 것처럼 착각하게 하는 것이다.

탐색하고 다른 페이지를 로딩하는 것이 라우터의 역할이다.
보통은 react-router를 사용

서버에 요청을 보내는 기본 동작을 막고 대신 React를 사용하여 페이지에 다른 콘텐츠를 렌더링한다. -> 라우팅

일반적으로 React에서는 라우팅이 코드에서 설정된다.
보통 페이지 역할을 하는 컴포넌트를 별도의 폴더에 저장하고, 이렇게 코드에서 라우트 설정을 복제한다.
코드에서 페이지로 새 페이지르 설정 했다면, 해당 페이지 컴포넌트 폴더에도 새로운 페이지 컴포넌트가 존재해야한다.

NextJS는 이러한 코드 내 라우트 정의를 없핸다.
파일과 폴더를 이용해서 페이지와 라우트를 정의한다.

NextJS 앱에는 특수한 pages라는 폴더가 있다.
이 폴더를 구성하고 페이지가 지원하는 라우트와 경로를 정의하면된다.

#### 3. Full stack capabilities

> Easily add backend code to your Next/React apps
> Storing data, getting data, authentication etc. can be added to your React projects

React 프로젝트에 백엔드 코드를 쉽게 추가할 수 있따.
SSR을 위해서 독립형 백엔드 코드도 있어얗나다.
파일 시스템에서 작업한다거나 데이터베이스에 접근할 수 있어야 한다.

NextJS에서는 NodeJS 코드를 이용해서 React 프로젝트에 백엔드 API를 쉽게 추가할 수 있다.

즉, NextJS를 이용하면 Next / React 애플리케이션에 이러한 코드를 쉽게 추가할 수 있다.

독립적으로 REST API 프로젝트를 구축하지 않아도 된다.
하나의 Next 프로젝트에 클라이언트 쪽 코드와 React 사용자 인터페이스를 추가하고 백엔드 API 코드와 혼합하면 된다.
